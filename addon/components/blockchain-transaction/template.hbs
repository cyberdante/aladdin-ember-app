{{#paper-item as |controls|}}
    {{#if editingTitle}}
        {{input value=transaction.title class="transaction-title" enter=(action "setNewTransactionTitle" transaction.title) }}
    {{else}}
        <p class="clickable" onClick={{action "toggleTxnEdition"}}>{{transaction.title}}&nbsp;<span style="color: #f92672">: {{transaction.returnType}}</span> </p>
    {{/if}}
    {{#if (and parameters parameters.length)}}
        <div class="button-with-icon-container">
            {{#controls.button raised=true primary=true iconButton=true onClick=(action "toggleTransactionDisplay")}}
                {{#if showingParams}}
                    {{paper-icon "unfold_less" title="Hide Properties"}}
                {{else}}
                    {{paper-icon "unfold_more" title="View Properties"}}
                {{/if}}
            {{/controls.button}}
        </div>
    {{/if}}
    <div class="button-with-icon-container">
        {{#controls.button raised=true primary=true iconButton=true onClick=(action "toggleTxnEdition")}}
            {{paper-icon "edit" title="Edit Transaction"}}
        {{/controls.button}}
    </div>
    <div class="button-with-icon-container red">
        {{#controls.button raised=true class="shaking" iconButton=true onClick=(action "showConfirmationDialog")}}
            {{paper-icon "delete_forever" title="Delete Transaction"}}
        {{/controls.button}}
    </div>
{{/paper-item}}
{{#if showPromptDialog}}
    {{confirmation-modal 
        confirmDelete=(action 'deleteTxn')
        closeConfirmationDialog=(action 'closeConfirmationDialog')
        modelType='transaction'
        model=transaction}}
{{/if}}
{{#if (and showingParams parameters parameters.length)}}
    {{#paper-card class="gray flex-xs-100 flex-sm-100 flex-md-100 flex-lg-100 flex-gt-lg-100 flex-xl-100" as |paramspanel|}}
        {{#paramspanel.content}}
            {{#paper-item class="parameter-header-wrapper" as |paramItem|}}
                <div class="parameters-header">Parameters</div>
                <div class="md-secondary-container">
                    {{#paramItem.button raised=true onClick=(action "addParams") }}
                        {{paper-icon "add"}}    
                    {{/paramItem.button}}
                </div>
            {{/paper-item}}
            {{#each parameters as |param|}}
                {{blockchain-transaction-parameter 
                    param=param
                    editingTitle=param.editingTitle
                    editingParamType=param.editingType
                    schema=schema}}
            {{/each}}
        {{/paramspanel.content}}
    {{/paper-card}}
{{/if}}
                {{#if showDialog}}
                    {{#paper-dialog fullscreen=fullscreen onClose=(action "closePromptDialog") origin=dialogOrigin}}
                        {{#paper-dialog-content}}
                            <div class="layout-row">
                                <div class="layout-column flex-50 layout-align-center-end" style="margin-right: 15px;">
                                    {{paper-input input="text" label=title value=newTxnName onChange=(action (mut newTxnName))}}
                                </div>
                                <div class="layout-column flex-50 dropdown-container">
                                    {{#paper-select
                                        label=assetName
                                        options=assetTitles
                                        selected=assetName
                                        onChange=(action (mut assetName))
                                        as |option|}}
                                        {{option}}
                                    {{/paper-select}}
                                </div>
                            </div>
                            {{#each params as |parameter|}}
                                <div class="layout-row">
                                    <div class="layout-column flex-50 layout-align-center-end" style="margin-right: 15px;">
                                        {{paper-input input="text" label=parameter.title value=parameter.title onChange=(action (mut parameter.title))}}
                                    </div>
                                    <div class="layout-column flex-50 layout-align-center-start dropdown-container">
                                        {{#paper-select
                                            label=parameter.type
                                            options=options
                                            selected=parameter.type
                                            onChange=(action (mut parameter.type))
                                            as |option|}}
                                            {{option}}
                                        {{/paper-select}}
                                    </div>
                                </div>                                
                            {{/each}}
                            <div class="layout-row">
                                <button class="layout-column flex-50 layout-align-center-center md-button md-raised" style="margin-right: 15px;" {{action 'addParams'}}  disabled={{doneButtonDisabled}}>
                                <span>{{fa-icon "plus"}} Add parameter</span>
                                </button>
                                <br/>
                                <button class="layout-column flex-50 md-button md-raised" {{action 'addNewTxn'}} disabled={{doneButtonDisabled}}>
                                <span>{{fa-icon 'check'}} Done</span>
                                </button>
                            </div>
                            <hr> 
                        {{/paper-dialog-content}}
                        {{#paper-dialog-actions class="layout-row"}}
                            <span class="flex"></span>
                            {{#paper-button primary=true onClick=(action "closePromptDialog")}}Exit{{/paper-button}}
                        {{/paper-dialog-actions}}
                    {{/paper-dialog}}
                {{/if}}
                {{#if showNewAssetDialog}}
                    {{#paper-dialog fullscreen=fullscreen onClose=(action "closeNewAssetDialog" newAssetTitle) origin=dialogOrigin as |newAssetModal|}}
                        {{#paper-dialog-content}}
                            <div class="layout-row">
                                <div class="layout-column flex-100">
                                    {{paper-input input="text" required="true" label="Asset Name" value=newAssetTitle onChange=(action (mut newAssetTitle))}}
                                </div>
                            </div>
                        {{/paper-dialog-content}}
                        {{#paper-dialog-actions class="layout-row"}}
                            <span class="flex"></span>
                            {{#paper-button primary=true onClick=(action "closeNewAssetDialog" newAssetTitle) disabled=isInputEmpty}}Add{{/paper-button}}
                        {{/paper-dialog-actions}}
                     {{/paper-dialog}}
                {{/if}}
